<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan 2026 - Trip Planner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@300;400;500;700&family=Noto+Serif+JP:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css?v=8">
    <link rel="stylesheet" href="css/components.css?v=2">
</head>
<body class="landing-page">
    <!-- Landing/User Selection Screen -->
    <main class="landing-screen" id="landingScreen">
        <!-- Center Content Panel -->
        <div class="landing-panel landing-panel-center">
            <!-- Animated background for center -->
            <div class="bg-animation">
                <div class="sakura-petals" id="sakuraPetals"></div>
                <div class="gradient-overlay"></div>
            </div>

            <div class="landing-content">
                <div class="logo-section">
                    <div class="japanese-text">Êó•Êú¨ 2026</div>
                    <h1 class="main-title">Japan Adventure</h1>
                    <p class="subtitle">Plan our journey together</p>
                </div>

                <div class="theme-picker landing-theme-picker">
                    <label for="themeSelectLanding">Choose a theme</label>
                    <select id="themeSelectLanding">
                        <!-- Options populated by JS -->
                    </select>
                </div>

                <div class="user-selection">
                    <h2 class="selection-title">Who are you?</h2>
                    <div class="user-grid" id="userGrid">
                        <!-- Users will be populated by JS -->
                    </div>
                </div>

                <div class="continue-section hidden" id="continueSection">
                    <p class="welcome-text">Welcome, <span id="selectedUserName"></span>!</p>
                    <button class="btn-primary glow-effect" id="continueBtn">
                        <span>Enter the Planner</span>
                        <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>

                <footer class="landing-footer">
                    <p>July - August 2026</p>
                </footer>
            </div>
        </div>
    </main>

    <!-- App Background (separate from container for proper fixed positioning) -->
    <div class="bg-animation app-bg-animation hidden" id="appBgAnimation">
        <div class="sakura-petals" id="appSakuraPetals"></div>
        <div class="gradient-overlay"></div>
    </div>

    <!-- Main Application (hidden initially) -->
    <div class="app-container hidden" id="appContainer">
        <!-- Navigation -->
        <nav class="main-nav">
            <div class="nav-brand">
                <span class="nav-japanese">Êó•Êú¨</span>
                <span class="nav-title">Japan 2026</span>
            </div>
            <div class="nav-links">
                <a href="#dashboard" class="nav-link active" data-section="dashboard">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="#availability" class="nav-link" data-section="availability">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                        <line x1="16" y1="2" x2="16" y2="6"/>
                        <line x1="8" y1="2" x2="8" y2="6"/>
                        <line x1="3" y1="10" x2="21" y2="10"/>
                    </svg>
                    <span>My Dates</span>
                </a>
                <a href="#destinations" class="nav-link" data-section="destinations">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                    <span>Destinations</span>
                </a>
                <a href="#attractions" class="nav-link" data-section="attractions">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                    </svg>
                    <span>Activities</span>
                </a>
                <a href="#budget" class="nav-link" data-section="budget">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"/>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                    </svg>
                    <span>Budget</span>
                </a>
            </div>
            <div class="nav-user">
                <div class="theme-picker nav-theme-picker">
                    <select id="themeSelectNav" title="Switch Theme">
                        <!-- Options populated by JS -->
                    </select>
                </div>
                <div class="nav-avatar-wrapper" id="navAvatarWrapper" title="Change Avatar">
                    <div class="user-avatar-small" id="navUserAvatar"></div>
                    <div class="avatar-edit-badge">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        </svg>
                    </div>
                </div>
                <span class="user-name-small" id="navUserName"></span>
                <button class="btn-icon" id="switchUserBtn" title="Switch User">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="8.5" cy="7" r="4"/>
                        <polyline points="17 11 19 13 23 9"/>
                    </svg>
                </button>
            </div>
        </nav>

        <!-- Dashboard Section -->
        <section class="content-section active" id="dashboard">
            <div class="section-header">
                <h1>Trip Dashboard</h1>
                <p class="section-subtitle">Everyone's plans at a glance</p>
            </div>

            <div class="dashboard-grid">
                <!-- Trip Overview Card -->
                <div class="dashboard-card trip-overview">
                    <div class="card-header">
                        <h3>Trip Overview</h3>
                    </div>
                    <div class="card-content">
                        <div class="stat-grid">
                            <div class="stat-item">
                                <span class="stat-value" id="statTravelers">0</span>
                                <span class="stat-label">Travelers Ready</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="statDestinations">0</span>
                                <span class="stat-label">Destinations</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="statAttractions">0</span>
                                <span class="stat-label">Activities</span>
                            </div>
                        </div>
                        <div class="best-dates" id="bestDates">
                            <p class="best-dates-label">Best Overlap Dates</p>
                            <p class="best-dates-value">Set your availability to see suggestions</p>
                        </div>
                    </div>
                </div>

                <!-- Availability Timeline -->
                <div class="dashboard-card availability-timeline">
                    <div class="card-header">
                        <h3>Availability Timeline</h3>
                        <span class="date-range">July - August 2026</span>
                    </div>
                    <div class="card-content">
                        <div class="timeline-container" id="timelineContainer">
                            <!-- Timeline will be populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Top Destinations -->
                <div class="dashboard-card top-destinations">
                    <div class="card-header">
                        <h3>Top Destinations</h3>
                        <a href="#destinations" class="card-link">View All ‚Üí</a>
                    </div>
                    <div class="card-content">
                        <div class="top-list" id="topDestinations">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Top Activities -->
                <div class="dashboard-card top-attractions">
                    <div class="card-header">
                        <h3>Most Voted Activities</h3>
                        <a href="#attractions" class="card-link">View All ‚Üí</a>
                    </div>
                    <div class="card-content">
                        <div class="top-list" id="topAttractions">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Budget Overview Card -->
                <div class="dashboard-card budget-overview">
                    <div class="card-header">
                        <h3>Budget Preferences</h3>
                        <a href="#budget" class="card-link">Set Yours ‚Üí</a>
                    </div>
                    <div class="card-content">
                        <div class="budget-tiers-summary" id="budgetTiersSummary">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- Team Status - Full Width at Bottom -->
                <div class="dashboard-card team-status">
                    <div class="card-header">
                        <h3>Team Status</h3>
                    </div>
                    <div class="card-content">
                        <div class="team-grid" id="teamStatus">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Availability Section -->
        <section class="content-section" id="availability">
            <div class="section-header">
                <h1>My Travel Dates</h1>
                <p class="section-subtitle">When can you travel to Japan?</p>
            </div>

            <div class="availability-container">
                <div class="availability-form">
                    <div class="form-card">
                        <h3>Available Date Range</h3>
                        <p class="form-description">Select the window when you could potentially travel</p>
                        <div class="date-range-picker">
                            <div class="date-input-group">
                                <label>Earliest Start</label>
                                <input type="date" id="availableStart" min="2026-07-01" max="2026-08-31">
                            </div>
                            <span class="date-separator">to</span>
                            <div class="date-input-group">
                                <label>Latest Return</label>
                                <input type="date" id="availableEnd" min="2026-07-01" max="2026-08-31">
                            </div>
                        </div>
                    </div>

                    <div class="form-card">
                        <h3>Preferred Trip Length</h3>
                        <p class="form-description">How long do you want to be in Japan?</p>
                        <div class="length-selector">
                            <input type="range" id="tripLength" min="7" max="21" value="14">
                            <div class="length-display">
                                <span id="tripLengthValue">14</span> days
                            </div>
                        </div>
                        <div class="length-presets">
                            <button class="preset-btn" data-days="7">1 week</button>
                            <button class="preset-btn active" data-days="14">2 weeks</button>
                            <button class="preset-btn" data-days="21">3 weeks</button>
                        </div>
                    </div>

                    <div class="form-card">
                        <h3>Preferred Trip Dates</h3>
                        <p class="form-description">Your ideal specific dates for the trip</p>
                        <div class="date-range-picker">
                            <div class="date-input-group">
                                <label>Start Date</label>
                                <input type="date" id="preferredStart" min="2026-07-01" max="2026-08-31">
                            </div>
                            <span class="date-separator">to</span>
                            <div class="date-input-group">
                                <label>End Date</label>
                                <input type="date" id="preferredEnd" min="2026-07-01" max="2026-08-31">
                            </div>
                        </div>
                    </div>

                    <button class="btn-primary save-btn" id="saveAvailability">
                        <span>Save My Dates</span>
                    </button>
                </div>

                <div class="availability-preview">
                    <h3>Group Availability</h3>
                    <div class="calendar-view" id="calendarView">
                        <!-- Calendar will be populated by JS -->
                    </div>
                    <div class="availability-legend">
                        <div class="legend-item">
                            <span class="legend-color available"></span>
                            <span>Available</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color preferred"></span>
                            <span>Preferred</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color overlap"></span>
                            <span>Best Overlap</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Destinations Section -->
        <section class="content-section" id="destinations">
            <div class="section-header">
                <h1>Destinations</h1>
                <p class="section-subtitle">Where do you want to go? Allocate days to each city.</p>
                <div class="days-budget">
                    <span>Days allocated: </span>
                    <span id="daysAllocated">0</span>
                    <span> / </span>
                    <span id="daysTotal">14</span>
                </div>
            </div>

            <div class="destinations-grid" id="destinationsGrid">
                <!-- Destination cards will be populated by JS -->
            </div>

            <button class="btn-floating" id="addDestinationBtn" title="Add Destination">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
            </button>
        </section>

        <!-- Activities Section -->
        <section class="content-section" id="attractions">
            <div class="section-header">
                <h1>Activities</h1>
                <p class="section-subtitle">Vote on what you want to see and do!</p>
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">All</button>
                    <button class="filter-tab" data-filter="most-voted">Most Voted</button>
                    <!-- City filters will be added dynamically -->
                </div>
            </div>

            <div class="attractions-grid" id="attractionsGrid">
                <!-- Attraction cards will be populated by JS -->
            </div>

            <button class="btn-floating" id="addAttractionBtn" title="Add Activity">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
            </button>
        </section>

        <!-- Budget Section -->
        <section class="content-section" id="budget">
            <div class="section-header">
                <h1>Trip Budget</h1>
                <p class="section-subtitle">Choose your spending tier for each category</p>
            </div>

            <div class="budget-container">
                <!-- Budget Summary Card -->
                <div class="budget-summary-card">
                    <div class="budget-total">
                        <div class="budget-total-header">
                            <span class="budget-label">Your Estimated Total</span>
                            <span class="budget-days">for <span id="budgetTripDays">14</span> days</span>
                        </div>
                        <div class="budget-total-amount">
                            <span class="currency">$</span>
                            <span class="amount" id="budgetTotalAmount">0</span>
                        </div>
                        <div class="budget-per-day">
                            <span>‚âà $<span id="budgetPerDay">0</span>/day</span>
                        </div>
                    </div>
                    
                    <div class="budget-breakdown">
                        <h4>Cost Breakdown</h4>
                        <div class="breakdown-item">
                            <span class="breakdown-icon">‚úàÔ∏è</span>
                            <span class="breakdown-label">Flight</span>
                            <span class="breakdown-value" id="breakdownFlight">$0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-icon">üè®</span>
                            <span class="breakdown-label">Hotels</span>
                            <span class="breakdown-value" id="breakdownHotels">$0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-icon">üçú</span>
                            <span class="breakdown-label">Food</span>
                            <span class="breakdown-value" id="breakdownFood">$0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-icon">üéå</span>
                            <span class="breakdown-label">Activities</span>
                            <span class="breakdown-value" id="breakdownActivities">$0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-icon">üõçÔ∏è</span>
                            <span class="breakdown-label">Shopping</span>
                            <span class="breakdown-value" id="breakdownShopping">$0</span>
                        </div>
                    </div>
                    
                    <button class="btn-primary save-btn" id="saveBudgetBtn">
                        <span>Save My Budget</span>
                    </button>
                </div>

                <!-- Budget Tiers Selection -->
                <div class="budget-tiers">
                    <!-- Flight Tier -->
                    <div class="budget-category" data-category="flight">
                        <div class="category-header">
                            <span class="category-icon">‚úàÔ∏è</span>
                            <h3>Flight</h3>
                        </div>
                        <div class="tier-options">
                            <label class="tier-option" data-tier="economy">
                                <input type="radio" name="flight" value="economy" checked>
                                <div class="tier-card">
                                    <span class="tier-name">Ch≈´kans≈ç</span>
                                    <span class="tier-japanese">‰∏≠ÈñìÂ±§</span>
                                    <span class="tier-description">Economy Class</span>
                                    <span class="tier-price">~$1,100</span>
                                </div>
                            </label>
                            <label class="tier-option" data-tier="business">
                                <input type="radio" name="flight" value="business">
                                <div class="tier-card">
                                    <span class="tier-name">Fuy≈´s≈ç</span>
                                    <span class="tier-japanese">ÂØåË£ïÂ±§</span>
                                    <span class="tier-description">Business Class</span>
                                    <span class="tier-price">~$4,500</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Hotels Tier -->
                    <div class="budget-category" data-category="hotels">
                        <div class="category-header">
                            <span class="category-icon">üè®</span>
                            <h3>Hotels</h3>
                        </div>
                        <div class="tier-options">
                            <label class="tier-option" data-tier="budget">
                                <input type="radio" name="hotels" value="budget" checked>
                                <div class="tier-card">
                                    <span class="tier-name">Ronin</span>
                                    <span class="tier-japanese">Êµ™‰∫∫</span>
                                    <span class="tier-description">Hostels & Capsules</span>
                                    <span class="tier-price">~$80/night</span>
                                </div>
                            </label>
                            <label class="tier-option" data-tier="mid">
                                <input type="radio" name="hotels" value="mid">
                                <div class="tier-card">
                                    <span class="tier-name">Daimyo</span>
                                    <span class="tier-japanese">Â§ßÂêç</span>
                                    <span class="tier-description">Nice Hotels & Ryokan</span>
                                    <span class="tier-price">~$160/night</span>
                                </div>
                            </label>
                            <label class="tier-option" data-tier="luxury">
                                <input type="radio" name="hotels" value="luxury">
                                <div class="tier-card">
                                    <span class="tier-name">Shogun</span>
                                    <span class="tier-japanese">Â∞ÜËªç</span>
                                    <span class="tier-description">Luxury Hotels</span>
                                    <span class="tier-price">~$400/night</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Food Tier -->
                    <div class="budget-category" data-category="food">
                        <div class="category-header">
                            <span class="category-icon">üçú</span>
                            <h3>Food</h3>
                        </div>
                        <div class="tier-options">
                            <label class="tier-option" data-tier="budget">
                                <input type="radio" name="food" value="budget" checked>
                                <div class="tier-card">
                                    <span class="tier-name">Aikido</span>
                                    <span class="tier-japanese">ÂêàÊ∞óÈÅì</span>
                                    <span class="tier-description">Konbini & Ramen</span>
                                    <span class="tier-price">~$40/day</span>
                                </div>
                            </label>
                            <label class="tier-option" data-tier="mid">
                                <input type="radio" name="food" value="mid">
                                <div class="tier-card">
                                    <span class="tier-name">Judo</span>
                                    <span class="tier-japanese">ÊüîÈÅì</span>
                                    <span class="tier-description">Nice Restaurants</span>
                                    <span class="tier-price">~$80/day</span>
                                </div>
                            </label>
                            <label class="tier-option" data-tier="premium">
                                <input type="radio" name="food" value="premium">
                                <div class="tier-card">
                                    <span class="tier-name">Sumo</span>
                                    <span class="tier-japanese">Áõ∏Êí≤</span>
                                    <span class="tier-description">Omakase & Kaiseki</span>
                                    <span class="tier-price">~$120/day</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Activities Tier -->
                    <div class="budget-category" data-category="activities">
                        <div class="category-header">
                            <span class="category-icon">üéå</span>
                            <h3>Activities</h3>
                        </div>
                        <div class="tier-options">
                            <label class="tier-option" data-tier="basic">
                                <input type="radio" name="activities" value="basic" checked>
                                <div class="tier-card">
                                    <span class="tier-name">Genin</span>
                                    <span class="tier-japanese">‰∏ãÂøç</span>
                                    <span class="tier-description">Limited Destinations and Activities</span>
                                    <span class="tier-price">~$20/day</span>
                                </div>
                            </label>
                            <label class="tier-option" data-tier="moderate">
                                <input type="radio" name="activities" value="moderate">
                                <div class="tier-card">
                                    <span class="tier-name">Chunin</span>
                                    <span class="tier-japanese">‰∏≠Âøç</span>
                                    <span class="tier-description">More Destinations and Activities</span>
                                    <span class="tier-price">~$60/day</span>
                                </div>
                            </label>
                            <label class="tier-option" data-tier="premium">
                                <input type="radio" name="activities" value="premium">
                                <div class="tier-card">
                                    <span class="tier-name">Jonin</span>
                                    <span class="tier-japanese">‰∏äÂøç</span>
                                    <span class="tier-description">Most Destinations and Activities</span>
                                    <span class="tier-price">~$100/day</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Shopping Tier -->
                    <div class="budget-category" data-category="shopping">
                        <div class="category-header">
                            <span class="category-icon">üõçÔ∏è</span>
                            <h3>Shopping</h3>
                        </div>
                        <div class="tier-options">
                            <label class="tier-option" data-tier="minimal">
                                <input type="radio" name="shopping" value="minimal" checked>
                                <div class="tier-card">
                                    <span class="tier-name">Gachapon</span>
                                    <span class="tier-japanese">„Ç¨„ÉÅ„É£„Éù„É≥</span>
                                    <span class="tier-description">Souvenirs Only</span>
                                    <span class="tier-price">~$100 total</span>
                                </div>
                            </label>
                            <label class="tier-option" data-tier="moderate">
                                <input type="radio" name="shopping" value="moderate">
                                <div class="tier-card">
                                    <span class="tier-name">Shotengai</span>
                                    <span class="tier-japanese">ÂïÜÂ∫óË°ó</span>
                                    <span class="tier-description">Clothes & Gifts</span>
                                    <span class="tier-price">~$350 total</span>
                                </div>
                            </label>
                            <label class="tier-option" data-tier="splurge">
                                <input type="radio" name="shopping" value="splurge">
                                <div class="tier-card">
                                    <span class="tier-name">Ginza</span>
                                    <span class="tier-japanese">ÈäÄÂ∫ß</span>
                                    <span class="tier-description">Luxury Shopping</span>
                                    <span class="tier-price">~$1,000 total</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

        </section>
    </div>

    <!-- Modal for adding destinations/attractions -->
    <div class="modal-overlay hidden" id="modalOverlay">
        <div class="modal" id="modal">
            <button class="modal-close" id="modalClose">√ó</button>
            <div class="modal-content" id="modalContent">
                <!-- Modal content will be populated by JS -->
            </div>
        </div>
    </div>

    <!-- Toast notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/supabase-client.js"></script>
    <script src="js/app.js"></script>
    <script src="js/avatar-picker.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/availability.js"></script>
    <script src="js/destinations.js"></script>
    <script src="js/attractions.js"></script>
    <script src="js/budget.js"></script>
    <script src="js/animations.js"></script>
</body>
</html>
